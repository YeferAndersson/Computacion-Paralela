scale_color_carto_c(palette = "ag_GrnYl")
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_size(range = c(0.5,2.5))+
scale_color_carto_c(palette = "ag_GrnYl")
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,2))+
scale_color_carto_c(palette = "ag_GrnYl")
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,2.5))+
scale_color_carto_c(palette = "ag_GrnYl")
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_carto_c(palette = "ag_GrnYl")
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_carto_c(palette = "ag_GrnYl")
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_carto_c(palette = "ag_GrnYl")
str(datos3)
#PROFUNDIDAD
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = PROFUNDIDAD,
alpha = PROFUNDIDAD,
size = PROFUNDIDAD))+
scale_radius(range = c(0.2,3))+
scale_color_carto_c(palette = "ag_GrnYl")
ggplot(data = peru_d) +
geom_sf() +
stat_density2d(data = datos3,
aes(x = LONGITUD ,
y = LATITUD,
fill = ..level..,
alpha = ..level..),
geom = "polygon",
size = 0.01,
bins = 8) +
scale_fill_gradient(low = "yellow",
high = "red") +
scale_alpha(range = c(0.2, 0.7)) +
theme(legend.position = "none")
ggplot(data = peru_d) +
geom_sf() +
geom_density2d(data = datos3,
aes(x = LONGITUD,
y = LATITUD),
size = 0.9,
bins = 8) +
stat_density2d(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
fill = ..level..,
alpha = ..level..),
geom = "polygon",
size = 0.01,
bins = 8) +
geom_text(data = datos3,
aes(LONGITUD,
LATITUD,
label = as.character(MAGNITUD)),
size=3,
color = "red",
fontface="bold") +
labs(title="7.1M Bohol Earthquake",
subtitle="October 15, 2013",
caption="Data from US Geological Survey") +
theme(axis.title = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank())
ggplot(data = peru_d) +
geom_sf() +
geom_density2d(data = datos3,
aes(x = LONGITUD,
y = LATITUD),
size = 0.9,
bins = 8) +
stat_density2d(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
fill = ..level..,
alpha = ..level..),
geom = "polygon",
size = 0.01,
bins = 8) +
theme(axis.title = element_blank(),
axis.text = element_blank(),
axis.ticks = element_blank())
ggplot(data = peru_d) +
geom_sf() +
stat_density2d(data = datos3,
aes(x = LONGITUD ,
y = LATITUD,
fill = ..level..,
alpha = ..level..),
geom = "polygon",
size = 0.01,
bins = 8) +
scale_fill_gradient(low = "yellow",
high = "red") +
scale_alpha(range = c(0.2, 0.7)) +
theme(legend.position = "none")
ggplot(data = peru_d) +
geom_sf() +
geom_density2d(data = datos3,
aes(x = LONGITUD,
y = LATITUD),
size = 0.9,
bins = 8) +
stat_density2d(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
fill = ..level..,
alpha = ..level..),
geom = "polygon",
size = 0.01,
bins = 8) +
theme(legend.position = "none")
#magnitud
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_carto_c(palette = "ag_GrnYl")
#magnitud
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()
#PROFUNDIDAD
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = PROFUNDIDAD,
alpha = PROFUNDIDAD,
size = PROFUNDIDAD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()
ggplot(data = peru_d) +
geom_sf()
ggplot(data = peru_d) +
geom_polygon(fill = "black",
color = "gray50")
ggplot(data = peru_d) +
geom_sf() +
geom_polygon(fill = "black",
color = "gray50")
#PROFUNDIDAD
ggplot(data = peru_d) +
geom_sf() +
aes(x = LONGITUD,
geom_point(data = datos3 %>% filter(year(FECHA_UTC) == 2020),
y = LATITUD,
color = PROFUNDIDAD,
alpha = PROFUNDIDAD,
size = PROFUNDIDAD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()
#PROFUNDIDAD
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3 %>% filter(year(FECHA_UTC) == 2020),
aes(x = LONGITUD,
y = LATITUD,
color = PROFUNDIDAD,
alpha = PROFUNDIDAD,
size = PROFUNDIDAD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3 %>% filter(year(FECHA_UTC) == 2020),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3 %>% filter(year(FECHA_UTC) == 2017),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3 %>% filter(year(FECHA_UTC) == 2017),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(1,3))+
scale_color_viridis()
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3 %>% filter(year(FECHA_UTC) == 2022),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(1,3))+
scale_color_viridis()
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3 %>% filter(year(FECHA_UTC) == 2021),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(1,3))+
scale_color_viridis()
peru_d
peru_d$geometry
Summary(peru_d$geometry)
peru_d$geometry
peru_d$geometry[peru_d$NOMBDEP == "PUNO"]
datos3 %>% filter(LONGITUD > -71, LONGITUD<-13)
datos3 %>% filter(LONGITUD > -71, LONGITUD < -13)
peru_d$geometry[peru_d$NOMBDEP == "PUNO"]
datos3 %>% filter(LONGITUD > -72, LONGITUD < -69, LATITUD > -18, LATITUD < -13 )
#por region
sismo_puno = datos3 %>% filter(LONGITUD > -72, LONGITUD < -69, LATITUD > -18, LATITUD < -13 )
ggplot(data = peru_d %>%
filter(NOMBDEP=="PUNO")) +
geom_sf() +
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = sismo_puno,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()
ggplot(data = peru_d %>%
filter(NOMBDEP=="PUNO")) +
geom_sf() +
geom_point(data = sismo_puno,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()
peru_d$geometry[peru_d$NOMBDEP == "PUNO"]
#por region
sismo_puno = datos3 %>% filter(LONGITUD > -71.11809 , LONGITUD < -68.81422 , LATITUD > -17.29547 , LATITUD < -13.00393 )
ggplot(data = peru_d %>%
filter(NOMBDEP=="PUNO")) +
geom_sf() +
geom_point(data = sismo_puno,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()
peru_d$geometry[peru_d$NOMBDEP == "PUNO"]
peru_d$geometry[peru_d$NOMBDEP == "PUNO"]$xmin
class(peru_d$geometry[peru_d$NOMBDEP == "PUNO"])
gadmCHE
mapview(peru_d
)
library(mapview)
mapview(ggplot(data = peru_d %>%
filter(NOMBDEP=="PUNO")) +
geom_sf())
mapview(peru_d$geometry)
install.packages("ggplotly")
install.packages("plotly")
library(plotly)
#magnitud
mapa_magnitud <- ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()
ggplotly(mapa_magnitud)
mapa_magnitud
?ggplotly
ggplotly(mapa_magnitud,tooltip = "MAGNITUD")
st_geometry(peru_d)
st_geometry(peru_d)$xim
st_geometry(peru_d)$xmin
st_geometry(peru_d)$xminbb
st_geometry(peru_d)$bb
st_geometry(peru_d)$
.
st_geometry(peru_d)
class(st_geometry(peru_d))
st_geometry(peru_d)[1]
st_geometry(peru_d)[[1]]
st_geometry(peru_d)[[2]]
st_geometry(peru_d)[1]
st_geometry(peru_d)[2]
peru_d$geometry[peru_d$NOMBDEP == "PUNO"]
peru_d$geometry[peru_d$NOMBDEP == "PUNO"][1]
peru_d$geometry[peru_d$NOMBDEP == "PUNO"][2]
peru_d$geometry[peru_d$NOMBDEP == "PUNO"][[1]]
bbox(peru_d)
st_coordinates(peru_d)
st_coordinates(peru_d$geometry[peru_d$NOMBDEP == "PUNO"])
st_coordinates(peru_d[peru_d$NOMBDEP == "PUNO"]) %>% min()
st_coordinates(peru_d[peru_d$NOMBDEP == "PUNO"])
st_coordinates(peru_d[peru_d$NOMBDEP == "PUNO"])$x
st_coordinates(peru_d[peru_d$NOMBDEP == "PUNO"])$X
st_coordinates(peru_d[peru_d$NOMBDEP == "PUNO"])$X
as.data.frame(st_coordinates(peru_d[peru_d$NOMBDEP == "PUNO"]))
as.data.frame(st_coordinates(peru_d[peru_d$NOMBDEP == "PUNO"]))$X
as.data.frame(st_coordinates(peru_d[peru_d$NOMBDEP == "PUNO"]))
as.data.frame(st_coordinates(peru_d[peru_d$NOMBDEP == "PUNO"]))$X %>% min()
as.data.frame(st_coordinates(peru_d[peru_d$NOMBDEP == "PUNO"]))$Y %>% min()
peru_d$geometry[peru_d$NOMBDEP == "PUNO"]
as.data.frame(st_coordinates(peru_d$geometry[peru_d$NOMBDEP == "PUNO"]))$X %>% min()
as.data.frame(st_coordinates(peru_d$geometry[1]))$X %>% min()
as.data.frame(st_coordinates(peru_d$geometry[,1]))$X %>% min()
as.data.frame(st_coordinates(peru_d$geometry[1]))$X %>% min()
as.data.frame(st_coordinates(peru_d$geometry[][1]))$X %>% min()
peru_d$geometry[peru_d$NOMBDEP == "PUNO"]
peru_d[1]
peru_d
peru_d[1,]
peru_d[1,]$geometry
peru_d[2,]$geometry
peru_d[2,]$NOMBDEP
peru_d[1,]$NOMBDEP
as.data.frame(st_coordinates(peru_d[1,]$geometry))
as.data.frame(st_coordinates(peru_d[1,]$geometry))$X %>% min()
list(head(datos2),head(datos3))
list(head(datos2),head(datos3))[[1]]
list(head(datos2),head(datos3))[[2]]
abctest = data.frame()
abctest = data.frame(a=c(),b=c())
rbind(abctest, c(1,2))
abctest = rbind(abctest, c(1,2))
coordenadas_dep = data.frame(dep = c(), minx=c(), miny=c(), maxx = c(), maxy = c())
for (i in 1:25) {
minx = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% min()
miny = as.data.frame(st_coordinates(peru_d[i,]$geometry))$Y %>% min()
maxx = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% max()
maxy = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% max()
coordenadas_dep = rbind(coordenadas_dep,c(peru_d[i,]$NOMBDEP,minx,miny,maxx,maxy))
}
coordenadas_dep
coordenadas_dep = data.frame(dep = c(), minx=c(), miny=c(), maxx = c(), maxy = c())
coordenadas_dep
peru_d[1,]
peru_d[1,]$NOMBDEP
peru_d[25,]$NOMBDEP
peru_d[24,]$NOMBDEP
peru_d[26,]$NOMBDEP
peru_d[1,]$NOMBDEP
peru_d[15,]$NOMBDEP
peru_d[16,]$NOMBDEP
peru_d[24,]$NOMBDEP
peru_d[22,]$NOMBDEP
peru_d[7,]$NOMBDEP
coordenadas_dep = rbind(coordenadas_dep,c(peru_d[1,]$NOMBDEP,1,1,1,1))
coordenadas_dep
str(coordenadas_dep)
abctest
coordenadas_dep = data.frame(dep = c(), minx=c(), miny=c(), maxx = c(), maxy = c())
for (i in 1:25) {
minx = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% min()
miny = as.data.frame(st_coordinates(peru_d[i,]$geometry))$Y %>% min()
maxx = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% max()
maxy = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% max()
agregar = data.frame(dep = c(peru_d[i,]$NOMBDEP), minx=c(minx), miny=c(miny), maxx = c(maxx), maxy = c(maxy))
coordenadas_dep = rbind(coordenadas_dep,agregar)
}
coordenadas_dep
nrow(datos3)
1 & 2
1 & 2
1 && 2
TRUE && TRUE
TRUE && FALSE
TRUE & FALSE
coordenadas_dep$minx
coordenadas_dep
coordenadas_dep[1,]$minx
abctest = c()
abctest = c(abctest,2)
DEPARTAMENTO = c()
DEPARTAMENTO = c()
for (j in 1:25) {
for (k in 1:(nrow(datos3))) {
if(datos3$LONGITUD > coordenadas_dep[j,]$minx &
datos3$LATITUD > coordenadas_dep[j,]$miny &
datos3$LONGITUD < coordenadas_dep[j,]$maxx &
datos3$LATITUD < coordenadas_dep[j,]$maxy){
DEPARTAMENTO = c(DEPARTAMENTO,coordenadas_dep[j,]$dep)
}
}
}
if(TRUE & TRUE & TRUE ){
print("true")
}
if(TRUE & FALSE & TRUE ){
print("true")
}
if(TRUE &
TRUE &
TRUE ){
print("true")
}
if(2 < 3 &
2 < 3 &
2 < 3 ){
print("true")
}
if(2 < 3 &
4 < 3 &
2 < 3 ){
print("true")
}
DEPARTAMENTO = c()
for (j in 1:25) {
for (k in 1:(nrow(datos3))) {
if(datos3$LONGITUD > coordenadas_dep[j,]$minx &
datos3$LATITUD > coordenadas_dep[j,]$miny &
datos3$LONGITUD < coordenadas_dep[j,]$maxx &
datos3$LATITUD < coordenadas_dep[j,]$maxy ){
DEPARTAMENTO = c(DEPARTAMENTO,coordenadas_dep[j,]$dep)
}
}
}
DEPARTAMENTO = c()
for (j in 1:25) {
for (k in 1:(nrow(datos3))) {
if(datos3[k,]$LONGITUD > coordenadas_dep[j,]$minx &
datos3[k,]$LATITUD > coordenadas_dep[j,]$miny &
datos3[k,]$LONGITUD < coordenadas_dep[j,]$maxx &
datos3[k,]$LATITUD < coordenadas_dep[j,]$maxy ){
DEPARTAMENTO = c(DEPARTAMENTO,coordenadas_dep[j,]$dep)
}
}
}
DEPARTAMENTO
