as.data.frame(st_coordinates(peru_d$geometry[,1]))$X %>% min()
as.data.frame(st_coordinates(peru_d$geometry[1]))$X %>% min()
as.data.frame(st_coordinates(peru_d$geometry[][1]))$X %>% min()
peru_d$geometry[peru_d$NOMBDEP == "PUNO"]
peru_d[1]
peru_d
peru_d[1,]
peru_d[1,]$geometry
peru_d[2,]$geometry
peru_d[2,]$NOMBDEP
peru_d[1,]$NOMBDEP
as.data.frame(st_coordinates(peru_d[1,]$geometry))
as.data.frame(st_coordinates(peru_d[1,]$geometry))$X %>% min()
list(head(datos2),head(datos3))
list(head(datos2),head(datos3))[[1]]
list(head(datos2),head(datos3))[[2]]
abctest = data.frame()
abctest = data.frame(a=c(),b=c())
rbind(abctest, c(1,2))
abctest = rbind(abctest, c(1,2))
coordenadas_dep = data.frame(dep = c(), minx=c(), miny=c(), maxx = c(), maxy = c())
for (i in 1:25) {
minx = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% min()
miny = as.data.frame(st_coordinates(peru_d[i,]$geometry))$Y %>% min()
maxx = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% max()
maxy = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% max()
coordenadas_dep = rbind(coordenadas_dep,c(peru_d[i,]$NOMBDEP,minx,miny,maxx,maxy))
}
coordenadas_dep
coordenadas_dep = data.frame(dep = c(), minx=c(), miny=c(), maxx = c(), maxy = c())
coordenadas_dep
peru_d[1,]
peru_d[1,]$NOMBDEP
peru_d[25,]$NOMBDEP
peru_d[24,]$NOMBDEP
peru_d[26,]$NOMBDEP
peru_d[1,]$NOMBDEP
peru_d[15,]$NOMBDEP
peru_d[16,]$NOMBDEP
peru_d[24,]$NOMBDEP
peru_d[22,]$NOMBDEP
peru_d[7,]$NOMBDEP
coordenadas_dep = rbind(coordenadas_dep,c(peru_d[1,]$NOMBDEP,1,1,1,1))
coordenadas_dep
str(coordenadas_dep)
abctest
coordenadas_dep = data.frame(dep = c(), minx=c(), miny=c(), maxx = c(), maxy = c())
for (i in 1:25) {
minx = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% min()
miny = as.data.frame(st_coordinates(peru_d[i,]$geometry))$Y %>% min()
maxx = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% max()
maxy = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% max()
agregar = data.frame(dep = c(peru_d[i,]$NOMBDEP), minx=c(minx), miny=c(miny), maxx = c(maxx), maxy = c(maxy))
coordenadas_dep = rbind(coordenadas_dep,agregar)
}
coordenadas_dep
nrow(datos3)
1 & 2
1 & 2
1 && 2
TRUE && TRUE
TRUE && FALSE
TRUE & FALSE
coordenadas_dep$minx
coordenadas_dep
coordenadas_dep[1,]$minx
abctest = c()
abctest = c(abctest,2)
DEPARTAMENTO = c()
DEPARTAMENTO = c()
for (j in 1:25) {
for (k in 1:(nrow(datos3))) {
if(datos3$LONGITUD > coordenadas_dep[j,]$minx &
datos3$LATITUD > coordenadas_dep[j,]$miny &
datos3$LONGITUD < coordenadas_dep[j,]$maxx &
datos3$LATITUD < coordenadas_dep[j,]$maxy){
DEPARTAMENTO = c(DEPARTAMENTO,coordenadas_dep[j,]$dep)
}
}
}
if(TRUE & TRUE & TRUE ){
print("true")
}
if(TRUE & FALSE & TRUE ){
print("true")
}
if(TRUE &
TRUE &
TRUE ){
print("true")
}
if(2 < 3 &
2 < 3 &
2 < 3 ){
print("true")
}
if(2 < 3 &
4 < 3 &
2 < 3 ){
print("true")
}
DEPARTAMENTO = c()
for (j in 1:25) {
for (k in 1:(nrow(datos3))) {
if(datos3$LONGITUD > coordenadas_dep[j,]$minx &
datos3$LATITUD > coordenadas_dep[j,]$miny &
datos3$LONGITUD < coordenadas_dep[j,]$maxx &
datos3$LATITUD < coordenadas_dep[j,]$maxy ){
DEPARTAMENTO = c(DEPARTAMENTO,coordenadas_dep[j,]$dep)
}
}
}
DEPARTAMENTO = c()
for (j in 1:25) {
for (k in 1:(nrow(datos3))) {
if(datos3[k,]$LONGITUD > coordenadas_dep[j,]$minx &
datos3[k,]$LATITUD > coordenadas_dep[j,]$miny &
datos3[k,]$LONGITUD < coordenadas_dep[j,]$maxx &
datos3[k,]$LATITUD < coordenadas_dep[j,]$maxy ){
DEPARTAMENTO = c(DEPARTAMENTO,coordenadas_dep[j,]$dep)
}
}
}
DEPARTAMENTO
library(lubridate)
library(tidyverse)
library(sp)
library(rmarkdown)
library(dplyr)
library(lubridate)
library(ggmap)
library(ggplot2)
library(viridis)
ggplot(data = peru_d %>%
filter(NOMBDEP=="PUNO")) +
geom_sf() +
geom_point(data = sismo_puno,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()
library(sp)
library(rmarkdown)
library(dplyr)
library(lubridate)
library(ggmap)
library(ggplot2)
library(viridis)
ggplot(data = peru_d) +
geom_sf() +
stat_density2d(data = datos3,
aes(x = LONGITUD ,
y = LATITUD,
fill = ..level..,
alpha = ..level..),
geom = "polygon",
size = 0.01,
bins = 8) +
scale_fill_gradient(low = "yellow",
high = "red") +
scale_alpha(range = c(0.2, 0.7)) +
theme(legend.position = "none")
mapa_magnitud
mapa_magnitud <- ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.15,2.5))+
scale_color_viridis()
mapa_magnitud
mapa_profundidad <-  ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = PROFUNDIDAD,
alpha = PROFUNDIDAD,
size = PROFUNDIDAD))+
scale_radius(range = c(0.15,2.5))+
scale_color_viridis()
mapa_profundidad
ggplot(data = peru_d %>%
filter(NOMBDEP=="PUNO")) +
geom_sf() +
geom_point(data = sismo_puno,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()
mapview(peru_d$geometry)
ggplot(data = peru_d %>%
filter(NOMBDEP=="PUNO")) +
geom_sf() +
geom_point(data = sismo_puno,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()
mapview(peru_d$geometry)
ggplot(data = peru_d) +
geom_sf() + theme(legend.position = 'none') +
geom_polygon(data = bohol_mapdf,
aes(x =long,
y = lat,
group = group),
color = "darkcyan") +
stat_density2d(aes(fill = ..level..,
x = longitude,
y = latitude),
alpha = .4,
bins = 8,
geom = "polygon",
data = Oct_2015_Quake) +
scale_fill_viridis() +
geom_polygon(data = loon_mapdf,
aes(x = long,
y = lat,
group = group),
color = "green",
fill = "red")
ggplot(data = peru_d) +
geom_sf() +
stat_density2d(data = datos3,
aes(x = LONGITUD ,
y = LATITUD,
fill = ..level..,
alpha = ..level..),
geom = "polygon",
size = 0.01,
bins = 8) +
scale_fill_gradient(low = "yellow",
high = "red") +
scale_alpha(range = c(0.2, 0.7)) +
theme(legend.position = "none")
ggplot(data = peru_d %>%
filter(NOMBDEP=="PUNO")) +
geom_sf() +
geom_point(data = sismo_puno,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()
mapview(peru_d$geometry)
ggplot(data = peru_d) +
geom_sf() +
stat_density2d(data = datos3,
aes(x = LONGITUD ,
y = LATITUD,
fill = ..level..,
alpha = ..level..),
geom = "polygon",
size = 0.01,
bins = 8) +
scale_fill_gradient(low = "yellow",
high = "red") +
scale_alpha(range = c(0.2, 0.7)) +
theme(legend.position = "none")
ggplot(data = peru_d) +
geom_sf() +
geom_density2d(data = datos3,
aes(x = LONGITUD,
y = LATITUD),
size = 0.9,
bins = 8) +
stat_density2d(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
fill = ..level..,
alpha = ..level..),
geom = "polygon",
size = 0.01,
bins = 8) +
theme(legend.position = "none")
mapa_magnitud
mapa_magnitud <- ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.15,2.5))+
scale_color_viridis()
mapa_magnitud
ggplot(data = peru_d %>%
filter(NOMBDEP=="PUNO")) +
geom_sf() +
geom_point(data = sismo_puno,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()
mapa_magnitud
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = PROFUNDIDAD,
alpha = PROFUNDIDAD,
size = PROFUNDIDAD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3 %>% filter(year(FECHA_UTC) == 2021),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(1,3))+
scale_color_viridis()
ggplot(data = peru_d) +
geom_sf() +
stat_density2d(data = datos3,
aes(x = LONGITUD ,
y = LATITUD,
fill = ..level..,
alpha = ..level..),
geom = "polygon",
size = 0.01,
bins = 8) +
scale_fill_gradient(low = "yellow",
high = "red") +
scale_alpha(range = c(0.2, 0.7)) +
theme(legend.position = "none")
ggplot(data = peru_d) +
geom_sf() +
geom_density2d(data = datos3,
aes(x = LONGITUD,
y = LATITUD),
size = 0.9,
bins = 8) +
stat_density2d(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
fill = ..level..,
alpha = ..level..),
geom = "polygon",
size = 0.01,
bins = 8) +
theme(legend.position = "none")
mapa_magnitud
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = PROFUNDIDAD,
alpha = PROFUNDIDAD,
size = PROFUNDIDAD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3 %>% filter(year(FECHA_UTC) == 2021),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(1,3))+
scale_color_viridis()
#Mapa de calor
ggplot(data = peru_d) +
geom_sf() +
stat_density2d(data = datos3,
aes(x = LONGITUD ,
y = LATITUD,
fill = ..level..,
alpha = ..level..),
geom = "polygon",
size = 0.01,
bins = 8) +
scale_fill_gradient(low = "yellow",
high = "red") +
scale_alpha(range = c(0.2, 0.7)) +
theme(legend.position = "none") +
labs(title="Sismos ocurridos desde el 1960",
subtitle="Mapa de calor",
caption="Datos de IGP2022")
#Mapa de calor
ggplot(data = peru_d) +
geom_sf() +
stat_density2d(data = datos3,
aes(x = LONGITUD ,
y = LATITUD,
fill = ..level..,
alpha = ..level..),
geom = "polygon",
size = 0.01,
bins = 8) +
scale_fill_gradient(low = "yellow",
high = "red") +
scale_alpha(range = c(0.2, 0.7)) +
theme(legend.position = "none") +
labs(title="Mapa de calor",
subtitle="Desde el 1960",
caption="Datos de IGP2022")
#2
ggplot(data = peru_d) +
geom_sf() +
geom_density2d(data = datos3,
aes(x = LONGITUD,
y = LATITUD),
size = 0.9,
bins = 8) +
stat_density2d(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
fill = ..level..,
alpha = ..level..),
geom = "polygon",
size = 0.01,
bins = 8) +
theme(legend.position = "none")+
labs(title="Mapa de calor - 2",
subtitle="Desde el 1960",
caption="Datos de IGP2022")
#magnitud
mapa_magnitud <- ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.15,2.5))+
scale_color_viridis()+
labs(title="Magnitud de los simos",
subtitle="Desde el 1960",
caption="Datos de IGP2022")
mapa_magnitud
#magnitud
mapa_magnitud <- ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.15,2.5))+
scale_color_viridis()+
labs(title="Magnitud de los sismos",
subtitle="Desde el 1960",
caption="Datos de IGP2022")
mapa_magnitud
#PROFUNDIDAD
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3,
aes(x = LONGITUD,
y = LATITUD,
color = PROFUNDIDAD,
alpha = PROFUNDIDAD,
size = PROFUNDIDAD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis()+
labs(title="Profundidad de los sismos",
subtitle="Desde el 1960",
caption="Datos de IGP2022")
#POR AÑO
ggplot(data = peru_d) +
geom_sf() +
geom_point(data = datos3 %>% filter(year(FECHA_UTC) == 2021),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(1,3))+
scale_color_viridis()+
labs(title="Magnitud de los sismos",
subtitle="En el año 2021",
caption="Datos de IGP2022")
ggplot(data = peru_d %>%
filter(NOMBDEP=="PUNO")) +
geom_sf() +
geom_point(data = sismo_puno,
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis() +
labs(title="Magnitud de los sismos en la Region de Puno",
subtitle="Desde el 1960",
caption="Datos de IGP2022")
