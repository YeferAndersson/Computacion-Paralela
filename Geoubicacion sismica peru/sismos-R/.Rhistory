str(depa_puno)
datos3 %>% filter(LONGITUD > -71.11809 , LONGITUD < -68.81422 , LATITUD > -17.29547 , LATITUD < -13.00393 )
datos3 %>% filter(LONGITUD > as.numeric(depa_puno$minx) , LONGITUD < depa_puno$maxx , LATITUD > depa_puno$miny , LATITUD < depa_puno$maxy )
datos3 %>% filter(LONGITUD > depa_puno$minx , LONGITUD < depa_puno$maxx , LATITUD > depa_puno$miny , LATITUD < depa_puno$maxy )
datos3 %>% filter(LONGITUD > as.double(depa_puno$minx) , LONGITUD < depa_puno$maxx , LATITUD > depa_puno$miny , LATITUD < depa_puno$maxy )
depa_puno$minx
5 > depa_puno$minx
2 > depa_puno$minx
-80 > depa_puno$minx
datos3 %>% filter(LONGITUD > depa_puno$minx & LONGITUD < depa_puno$maxx & LATITUD > depa_puno$miny & LATITUD < depa_puno$maxy )
datos3 %>% filter(LONGITUD > depa_puno$minx && LONGITUD < depa_puno$maxx && LATITUD > depa_puno$miny && LATITUD < depa_puno$maxy )
datos3 %>% filter(LONGITUD > depa_puno$minx & LONGITUD < depa_puno$maxx & LATITUD > depa_puno$miny & LATITUD < depa_puno$maxy )
?filter
LONGITUD > depa_puno$minx
datos3 %>% filter(datos3$LONGITUD > depa_puno$minx , datos3$LONGITUD < depa_puno$maxx , datos3$LATITUD > depa_puno$miny , datos3$LATITUD < depa_puno$maxy )
depa_puno
depa_puno$minx
depa_puno[,2]
str(datos3)
str(coordenadas_dep)
datos3 %>% select(LONGITUD > depa_puno$minx , LONGITUD < depa_puno$maxx , LATITUD > depa_puno$miny , LATITUD < depa_puno$maxy )
datos3 %>% filte(LONGITUD > depa_puno$minx , LONGITUD < depa_puno$maxx , LATITUD > depa_puno$miny , LATITUD < depa_puno$maxy )
datos3 %>% filter(LONGITUD > depa_puno$minx , LONGITUD < depa_puno$maxx , LATITUD > depa_puno$miny , LATITUD < depa_puno$maxy )
datos3 %>% filter(LONGITUD > -71.11809 , LONGITUD < -68.81422 , LATITUD > -17.29547 , LATITUD < -13.00393 )
depa_puno$minx
a_test = -71.11809
b_test = -68.81422
c_test = -17.29547
d_test = -13.00393
datos3 %>% filter(LONGITUD > a_test , LONGITUD < b_test , LATITUD > c_test , LATITUD < d_test )
typeof(-71.11809)
typeof(depa_puno$minx)
class(-71.11809)
class(depa_puno$minx)
#a_test = -71.11809
#b_test = -68.81422
#c_test = -17.29547
#d_test = -13.00393
a_test = depa_puno$minx
b_test = depa_puno$maxx
c_test = depa_puno$miny
d_test = depa_puno$maxy
depa_puno
coordenadas_dep
for (i in 1:25) {
minx = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% min()
miny = as.data.frame(st_coordinates(peru_d[i,]$geometry))$Y %>% min()
maxx = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% max()
maxy = as.data.frame(st_coordinates(peru_d[i,]$geometry))$Y %>% max()
agregar = data.frame(dep = c(peru_d[i,]$NOMBDEP), minx=c(minx), miny=c(miny), maxx = c(maxx), maxy = c(maxy))
coordenadas_dep = rbind(coordenadas_dep,agregar)
}
library(sf)
for (i in 1:25) {
minx = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% min()
miny = as.data.frame(st_coordinates(peru_d[i,]$geometry))$Y %>% min()
maxx = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% max()
maxy = as.data.frame(st_coordinates(peru_d[i,]$geometry))$Y %>% max()
agregar = data.frame(dep = c(peru_d[i,]$NOMBDEP), minx=c(minx), miny=c(miny), maxx = c(maxx), maxy = c(maxy))
coordenadas_dep = rbind(coordenadas_dep,agregar)
}
coordenadas_dep %>% filter(dep == "PUNO")
coordenadas_dep = data.frame(dep = c(), minx=c(), miny=c(), maxx = c(), maxy = c())
for (i in 1:25) {
minx = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% min()
miny = as.data.frame(st_coordinates(peru_d[i,]$geometry))$Y %>% min()
maxx = as.data.frame(st_coordinates(peru_d[i,]$geometry))$X %>% max()
maxy = as.data.frame(st_coordinates(peru_d[i,]$geometry))$Y %>% max()
agregar = data.frame(dep = c(peru_d[i,]$NOMBDEP), minx=c(minx), miny=c(miny), maxx = c(maxx), maxy = c(maxy))
coordenadas_dep = rbind(coordenadas_dep,agregar)
}
coordenadas_dep %>% filter(dep == "PUNO")
datos3 %>% filter(LONGITUD > depa_puno$minx , LONGITUD < depa_puno$maxx , LATITUD > depa_puno$miny , LATITUD < depa_puno$maxy )
#a_test = -71.11809
#b_test = -68.81422
#c_test = -17.29547
#d_test = -13.00393
a_test = depa_puno$minx
b_test = depa_puno$maxx
c_test = depa_puno$miny
d_test = depa_puno$maxy
depa_puno <- coordenadas_dep[coordenadas_dep == "PUNO",]
datos3 %>% filter(LONGITUD > depa_puno$minx , LONGITUD < depa_puno$maxx , LATITUD > depa_puno$miny , LATITUD < depa_puno$maxy )
ggplot(data = peru_d %>%
filter(NOMBDEP=="PUNO")) +
geom_sf() +
geom_point(data = datos3 %>%
filter(LONGITUD > depa_puno$minx , LONGITUD < depa_puno$maxx , LATITUD > depa_puno$miny , LATITUD < depa_puno$maxy ),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis() +
labs(title="Magnitud de los sismos en la Region de Puno",
subtitle="Desde el 1960",
caption="Datos de IGP2022")
porDepartamento <- function(departamento){
depa = coordenadas_dep[coordenadas_dep == departamento,]
ggplot(data = peru_d %>%
filter(NOMBDEP == departamento)) +
geom_sf() +
geom_point(data = datos3 %>%
filter(LONGITUD > depa$minx , LONGITUD < depa$maxx , LATITUD > depa$miny , LATITUD < depa$maxy ),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis() +
labs(title=paste("Magnitud de los sismos en la Region de ", departamento),
subtitle="Desde el 1960",
caption="Datos de IGP2022")
}
porDepartamento("PUNO")
porDepartamento("AREQUIPA")
porDepartamento("LIMA")
porDepartamento("TACNA")
#por region
rm(sismo_puno)
rm(depa_puno)
rm(as.list(c(a_test,b_test,c_test,d_test)))
rm(as.list(c("a_test","b_test","c_test","d_test")))
rm(c("a_test","b_test","c_test","d_test"))
rm(list = c("a_test","b_test","c_test","d_test"))
rm(abctest)
rm(DEPARTAMENTO)
coordenadas_dep
us
x
y
str(datos3)
year_test
year_test = c(1961,2000)
datos3 %>% filter(year(FECHA_UTC) == year_test)
porDepartamento <- function(departamento, yearsSelect){
depa = coordenadas_dep[coordenadas_dep == departamento,]
ggplot(data = peru_d %>%
filter(NOMBDEP == departamento)) +
geom_sf() +
geom_point(data = datos3 %>%
filter(LONGITUD > depa$minx,
LONGITUD < depa$maxx,
LATITUD > depa$miny,
LATITUD < depa$maxy,
year(FECHA_UTC) == yearsSelect),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis() +
labs(title=paste("Magnitud de los sismos en la Region de ", departamento),
subtitle="Desde el 1960",
caption="Datos de IGP2022")
}
porDepartamento("PUNO", year_test)
datos3 %>%
filter(LONGITUD > depa$minx,
LONGITUD < depa$maxx,
LATITUD > depa$miny,
LATITUD < depa$maxy,
year(FECHA_UTC) == yearsSelect)
datos3 %>%
filter(LONGITUD > depa$minx,
LONGITUD < depa$maxx,
LATITUD > depa$miny,
LATITUD < depa$maxy
)
porDepartamento("PUNO", 1960)
porDepartamento("PUNO", 2021)
year_test = 1960:2021
porDepartamento("PUNO",year_test )
porDepartamento("PUNO",year_test)
year_test = c(1960,2000:2020)
porDepartamento("PUNO",year_test)
year_test = c(1960,2000:2010)
porDepartamento("PUNO",year_test)
year_test = c(2019,2020,2021)
porDepartamento("PUNO",year_test)
year_test = c(2019,2020)
porDepartamento("PUNO",year_test)
datos3 %>% filter(year(FECHA_UTC) == year_test)
year_test = c(2019,2020,2021)
datos3 %>% filter(year(FECHA_UTC) == year_test)
datos3 %>% filter(year(FECHA_UTC) == year_test) %>% tail()
datos3 %>% filter(year(FECHA_UTC) == year_test) %>% head()
year_test = 1960:2021
datos3 %>% filter(year(FECHA_UTC) == year_test) %>% head()
datos3 %>% filter(year(FECHA_UTC) == year_test) %>% tail()
year_test[4]
year_test[1]
year_test[16]
datos3 %>% filter(year(FECHA_UTC) == year_test) %>% tail()
datos3 %>% filter_(year(FECHA_UTC) == year_test) %>% tail()
datos3 %>% filter_all(year(FECHA_UTC) == year_test) %>% tail()
datos3 %>% filter(year(FECHA_UTC) %in% year_test) %>% tail()
datos3 %>% filter(year(FECHA_UTC) %in% year_test) %>% head()
porDepartamento <- function(departamento, yearsSelect){
depa = coordenadas_dep[coordenadas_dep == departamento,]
ggplot(data = peru_d %>%
filter(NOMBDEP == departamento)) +
geom_sf() +
geom_point(data = datos3 %>%
filter(LONGITUD > depa$minx,
LONGITUD < depa$maxx,
LATITUD > depa$miny,
LATITUD < depa$maxy,
year(FECHA_UTC) %in% yearsSelect),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis() +
labs(title=paste("Magnitud de los sismos en la Region de ", departamento),
subtitle="Desde el 1960",
caption="Datos de IGP2022")
}
porDepartamento("PUNO",year_test)
porDepartamento("PUNO",year_test)
year_test = c(1960,2000,2021)
porDepartamento("PUNO",year_test)
porDepartamento <- function(departamento, yearsSelect){
depa = coordenadas_dep[coordenadas_dep == departamento,]
ggplot(data = peru_d %>%
filter(NOMBDEP == departamento)) +
geom_sf() +
geom_point(data = datos3 %>%
filter(LONGITUD > depa$minx,
LONGITUD < depa$maxx,
LATITUD > depa$miny,
LATITUD < depa$maxy,
year(FECHA_UTC) %in% yearsSelect),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis() +
labs(title=paste("Magnitud de los sismos en ", departamento),
subtitle=paste("años: ", yearsSelect),
caption="Datos de IGP2022")
}
porDepartamento("PUNO",year_test)
as.character(year_test)
porDepartamento <- function(departamento, yearsSelect){
depa = coordenadas_dep[coordenadas_dep == departamento,]
ggplot(data = peru_d %>%
filter(NOMBDEP == departamento)) +
geom_sf() +
geom_point(data = datos3 %>%
filter(LONGITUD > depa$minx,
LONGITUD < depa$maxx,
LATITUD > depa$miny,
LATITUD < depa$maxy,
year(FECHA_UTC) %in% yearsSelect),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis() +
labs(title=paste("Magnitud de los sismos en ", departamento),
subtitle=paste("años: ", as.character(yearsSelect)),
caption="Datos de IGP2022")
}
porDepartamento("PUNO",year_test)
porDepartamento <- function(departamento, yearsSelect){
depa = coordenadas_dep[coordenadas_dep == departamento,]
ggplot(data = peru_d %>%
filter(NOMBDEP == departamento)) +
geom_sf() +
geom_point(data = datos3 %>%
filter(LONGITUD > depa$minx,
LONGITUD < depa$maxx,
LATITUD > depa$miny,
LATITUD < depa$maxy,
year(FECHA_UTC) %in% yearsSelect),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis() +
labs(title=paste("Magnitud de los sismos en ", departamento),
subtitle=paste("años: ", as.character(yearsSelect), sep = " - "),
caption="Datos de IGP2022")
}
porDepartamento("PUNO",year_test)
year_test
paste(year_test)
paste("hola", year_test)
paste("hola", as.character(year_test))
porDepartamento <- function(departamento, yearsSelect){
depa = coordenadas_dep[coordenadas_dep == departamento,]
ggplot(data = peru_d %>%
filter(NOMBDEP == departamento)) +
geom_sf() +
geom_point(data = datos3 %>%
filter(LONGITUD > depa$minx,
LONGITUD < depa$maxx,
LATITUD > depa$miny,
LATITUD < depa$maxy,
year(FECHA_UTC) %in% yearsSelect),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis() +
labs(title=paste("Magnitud de los sismos en ", departamento),
subtitle=yearsSelect,
caption="Datos de IGP2022")
}
porDepartamento("PUNO",year_test)
year_test = c(1990,2000,2021)
porDepartamento("PUNO",year_test)
porDepartamento <- function(departamento, yearsSelect){
depa = coordenadas_dep[coordenadas_dep == departamento,]
ggplot(data = peru_d %>%
filter(NOMBDEP == departamento)) +
geom_sf() +
geom_point(data = datos3 %>%
filter(LONGITUD > depa$minx,
LONGITUD < depa$maxx,
LATITUD > depa$miny,
LATITUD < depa$maxy,
year(FECHA_UTC) %in% yearsSelect),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis() +
labs(title=paste("Magnitud de los sismos en ", departamento),
subtitle=as.character(yearsSelect),
caption="Datos de IGP2022")
}
porDepartamento("PUNO",year_test)
cat(year_test)
porDepartamento <- function(departamento, yearsSelect){
depa = coordenadas_dep[coordenadas_dep == departamento,]
ggplot(data = peru_d %>%
filter(NOMBDEP == departamento)) +
geom_sf() +
geom_point(data = datos3 %>%
filter(LONGITUD > depa$minx,
LONGITUD < depa$maxx,
LATITUD > depa$miny,
LATITUD < depa$maxy,
year(FECHA_UTC) %in% yearsSelect),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis() +
labs(title=paste("Magnitud de los sismos en ", departamento),
subtitle=cat(yearsSelect),
caption="Datos de IGP2022")
}
porDepartamento("PUNO",year_test)
cat(as.character(year_test))
as.character(cat(year_test))
as.character(paste(year_test))
as.character(paste0(year_test))
as.character(paste0(year_test))[1]
paste("hola", year_test[1])
paste("hola", year_test[1], paste(year_test[2]))
paste("hola", year_test[1], paste(year_test[2:3]))
porDepartamento <- function(departamento, yearsSelect){
depa = coordenadas_dep[coordenadas_dep == departamento,]
ggplot(data = peru_d %>%
filter(NOMBDEP == departamento)) +
geom_sf() +
geom_point(data = datos3 %>%
filter(LONGITUD > depa$minx,
LONGITUD < depa$maxx,
LATITUD > depa$miny,
LATITUD < depa$maxy,
year(FECHA_UTC) %in% yearsSelect),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis() +
labs(title=paste("Magnitud de los sismos en ", departamento),
subtitle=paste(yearsSelect),
caption="Datos de IGP2022")
}
porDepartamento("PUNO",year_test)
for (i in 1:3) <- paste(year_test[i])
for (i in 1:3) <- paste(year_test[i])
for (i in 1:3) paste(year_test[i])
for (i in 1:3) paste(year_test[i])
for (i in 1:3) print(year_test[i])
for (i in 1:3) paste(year_test[i])
paste(year_test[1])
for (i in 1:3) paste(year_test[i])
toString(year_test)
porDepartamento <- function(departamento, yearsSelect){
depa = coordenadas_dep[coordenadas_dep == departamento,]
ggplot(data = peru_d %>%
filter(NOMBDEP == departamento)) +
geom_sf() +
geom_point(data = datos3 %>%
filter(LONGITUD > depa$minx,
LONGITUD < depa$maxx,
LATITUD > depa$miny,
LATITUD < depa$maxy,
year(FECHA_UTC) %in% yearsSelect),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis() +
labs(title=paste("Magnitud de los sismos en ", departamento),
subtitle=paste("año(s): ", toString(yearsSelect)),
caption="Datos de IGP2022")
}
year_test = c(1990,2000,2021)
porDepartamento("PUNO",year_test)
year_test = 2000:2021
porDepartamento("PUNO",year_test)
toString(year_test)
toString(year_test, sep = " ")
toString(year_test, sep = " - ")
porDepartamento <- function(departamento, yearsSelect){
depa = coordenadas_dep[coordenadas_dep == departamento,]
ggplot(data = peru_d %>%
filter(NOMBDEP == departamento)) +
geom_sf() +
geom_point(data = datos3 %>%
filter(LONGITUD > depa$minx,
LONGITUD < depa$maxx,
LATITUD > depa$miny,
LATITUD < depa$maxy,
year(FECHA_UTC) %in% yearsSelect),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis() +
labs(title=paste("Magnitud de los sismos en ", departamento),
subtitle=paste("año(s): ", yearsSelect, collapse = " "),
caption="Datos de IGP2022")
}
year_test = c(1992,2001,2010,2020)
porDepartamento("PUNO",year_test)
porDepartamento <- function(departamento, yearsSelect){
depa = coordenadas_dep[coordenadas_dep == departamento,]
ggplot(data = peru_d %>%
filter(NOMBDEP == departamento)) +
geom_sf() +
geom_point(data = datos3 %>%
filter(LONGITUD > depa$minx,
LONGITUD < depa$maxx,
LATITUD > depa$miny,
LATITUD < depa$maxy,
year(FECHA_UTC) %in% yearsSelect),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis() +
labs(title=paste("Magnitud de los sismos en ", departamento),
subtitle=paste(yearsSelect, collapse = " "),
caption="Datos de IGP2022")
}
porDepartamento("PUNO",year_test)
porDepartamento <- function(departamento, yearsSelect){
depa = coordenadas_dep[coordenadas_dep == departamento,]
ggplot(data = peru_d %>%
filter(NOMBDEP == departamento)) +
geom_sf() +
geom_point(data = datos3 %>%
filter(LONGITUD > depa$minx,
LONGITUD < depa$maxx,
LATITUD > depa$miny,
LATITUD < depa$maxy,
year(FECHA_UTC) %in% yearsSelect),
aes(x = LONGITUD,
y = LATITUD,
color = MAGNITUD,
alpha = MAGNITUD,
size = MAGNITUD))+
scale_radius(range = c(0.2,3))+
scale_color_viridis() +
labs(title=paste("Magnitud de los sismos en ", departamento),
subtitle=paste(yearsSelect, collapse = " - "),
caption="Datos de IGP2022")
}
porDepartamento("PUNO",year_test)
